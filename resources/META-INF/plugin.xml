<!--
  ~ The MIT License (MIT)
  ~
  ~ Copyright (c) 2017 Hannah Schellekens, Sten Wessel
  ~
  ~ Permission is hereby granted, free of charge, to any person obtaining a copy
  ~ of this software and associated documentation files (the "Software"), to deal
  ~ in the Software without restriction, including without limitation the rights
  ~ to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
  ~ copies of the Software, and to permit persons to whom the Software is
  ~ furnished to do so, subject to the following conditions:
  ~
  ~ The above copyright notice and this permission notice shall be included in all
  ~ copies or substantial portions of the Software.
  ~
  ~ THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  ~ IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  ~ FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  ~ AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  ~ LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
  ~ OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
  ~ SOFTWARE.
  -->
<idea-plugin url="https://github.com/Hannah-Sten/TeXiFy-IDEA">

    <!-- Plugin information -->
    <id>nl.rubensten.texifyidea</id>
    <name>TeXiFy IDEA</name>
    <version>0.6.7</version>
    <!--
    Info about build ranges: https://www.jetbrains.org/intellij/sdk/docs/basics/getting_started/build_number_ranges.html
    Note that an xyz branch corresponds to version 20xy.z and a since build of xyz.*
    means that the first possible build is the next branch number after xyz, so e.g.
    a since build of 173.* is equal to 181
    -->
    <idea-version since-build="193.4099.13"/>
    <vendor url="https://hannah-sten.github.io/home/index.html">Hannah-Sten</vendor>

    <!-- Dependencies (must be defined to ensure compatibility with other IDEs) -->
    <depends>com.intellij.modules.lang</depends>
    <depends optional="true" config-file="grazie.xml">tanvd.grazi</depends>

    <description><![CDATA[
        <p>
            Plugin for LaTeX and BibTeX support in IntelliJ, featuring:
        </p>
        <ul>
            <li>Syntax highlighting</li>
            <li>Autocompletion of labels, (custom defined) commands and environments</li>
            <li>Writer ergonomics - writing LaTeX made less cumbersome</li>
            <li>Compiler support for pdfLaTeX, LuaTeX, Latexmk, texliveonfly, XeLaTeX, bibtex, and biber</li>
            <li>Inspections. Intentions. And heaps more inspections</li>
            <li>Full BibTeX support</li>
            <li>Formatter for LaTeX and BibTeX</li>
            <li>Structure view for LaTeX and BibTeX with filters</li>
            <li>Code folding for imports, sections, and environments</li>
            <li>SumatraPDF (Windows), Evince (Linux) and Okular (Linux) support with forward and backward search</li>
            <li>Smart quotes</li>
            <li>Unicode math preview</li>
            <li>Equation and TikZ picture preview</li>
            <li>Gutter icons for quick compilation and file includes</li>
            <li>Fancy icons that fit in with the IntelliJ style</li>
            <li>Brace matching</li>
            <li>Word counting tool</li>
            <li>File templates for <code>.tex</code>, <code>.sty</code>, <code>.cls</code>, <code>.bib</code>, and <code>.tikz</code> files</li>
            <li>Automagically import packages of common commands</li>
            <li>Go to declaration of labels</li>
            <li>Shortcuts for styling text</li>
            <li>Line commenter</li>
            <li>Support for user-created document classes and packages</li>
            <li>Toggle star action</li>
            <li>Words of encouragement</li>
            <li>A complete feature list can be found at our <a href="https://github.com/Hannah-Sten/TeXiFy-IDEA/wiki/Features">wiki</a> (work in progress).</li>
        </ul>
        <p>
            All critique, questions, suggestions, requests, bug reports, kudos, and (non-)creative ideas are
            welcome on the <a href="https://github.com/Hannah-Sten/TeXiFy-IDEA">plugin's GitHub page</a>.
            If you want to directly chat with us, take a peek at the project's
            <a href="https://gitter.im/TeXiFy-IDEA">gitter</a>.
        </p>
    ]]></description>

    <!-- Changelog -->
    <change-notes><![CDATA[
        <p><strong>Beta 0.6.7</strong></p>
        <p>
            We welcome you to yet another instance of our bimestrial updates containing a plethora of changes and bug fixes.
            Get excited about Okular support, a table creation wizard, makeindex support and much more!
        <p>
        <p>
            We thank everyone who submitted issues and provided feedback to make TeXiFy IDEA better.
            Your input is valuable and well appreciated.
        </p>
        <br>
        <p>
            <em>Additions</em>
        </p>
        <ul>
            <li>Table creation wizard. (<a href="https://github.com/Hannah-Sten/TeXiFy-IDEA/issues/907">#907</a>)</li>
            <li>Added support for multiple citations in one command. (<a href="https://github.com/Hannah-Sten/TeXiFy-IDEA/issues/921">#921</a>)</li>
            <li>Project-specific setting to change compiler compatibility. (<a href="https://github.com/Hannah-Sten/TeXiFy-IDEA/issues/891">#891</a>)</li>
            <li>Added an option to the run config to always compile twice. (<a href="https://github.com/Hannah-Sten/TeXiFy-IDEA/issues/908">#908</a>)</li>
            <li>Added support for automatically running makeindex in auxiliary directories. (<a href="https://github.com/Hannah-Sten/TeXiFy-IDEA/issues/924">#924</a>)</li>
            <li>Added support for Okular. (<a href="https://github.com/Hannah-Sten/TeXiFy-IDEA/issues/1064">#1064</a>)</li>
            <li>Added inspection that checks whether the \addbibresource has a file extension. (<a href="https://github.com/Hannah-Sten/TeXiFy-IDEA/issues/956">#956</a>)</li>
            <li>Added support for including packages in package or documentclass options. (<a href="https://github.com/Hannah-Sten/TeXiFy-IDEA/issues/911">#911</a>, <a href="https://github.com/Hannah-Sten/TeXiFy-IDEA/issues/949">#949</a>)</li>
            <li>Added menu entry to clear all generated files. (<a href="https://github.com/Hannah-Sten/TeXiFy-IDEA/issues/971">#971</a>)</li>
            <li>Added continuous preview of math and TikZ pictures. (<a href="https://github.com/Hannah-Sten/TeXiFy-IDEA/issues/923">#923</a>)</li>
            <li>Specify custom commands that define a label. (<a href="https://github.com/Hannah-Sten/TeXiFy-IDEA/issues/815">#815</a>)</li>
        </ul>
        <br>
        <p>
            <em>Changes</em>
        </p>
        <ul>
            <li>Performance improvements. (<a href="https://github.com/Hannah-Sten/TeXiFy-IDEA/issues/932">#932</a>, <a href="https://github.com/Hannah-Sten/TeXiFy-IDEA/issues/944">#944</a>)</li>
            <li>Inspection for normal space after abbreviation will not be triggered in comments. (<a href="https://github.com/Hannah-Sten/TeXiFy-IDEA/issues/983">#983</a>)</li>
            <li>The 'file not found' inspection quickfix now also uses the file creation dialog. (<a href="https://github.com/Hannah-Sten/TeXiFy-IDEA/issues/1004">#1004</a>)</li>
            <li>Internal code improvements.</li>
        </ul>
        <br>
        <p>
            <em>Bug fixes</em>
        </p>
        <ul>
            <li>Renamed labels will now be renamed in all files. (<a href="https://github.com/Hannah-Sten/TeXiFy-IDEA/issues/950">#950</a>)</li>
            <li>Fixed not being able to disable bibtex. (<a href="https://github.com/Hannah-Sten/TeXiFy-IDEA/issues/945">#945</a>)</li>
            <li>Fixed package dependencies being inserted in the wrong file. (<a href="https://github.com/Hannah-Sten/TeXiFy-IDEA/issues/942">#942</a>)</li>
            <li>Support compilation of non-project files. (<a href="https://github.com/Hannah-Sten/TeXiFy-IDEA/issues/987">#987</a>)</li>
            <li>Fixed crash when providing optional parameters to a \ref command as comma separated list. (<a href="https://github.com/Hannah-Sten/TeXiFy-IDEA/issues/980">#980</a>)</li>
            <li>Fixed missing autocompletion when a file name is equal to a folder name. (<a href="https://github.com/Hannah-Sten/TeXiFy-IDEA/issues/937">#937</a>)</li>
            <li>Fixed crashes. (<a href="https://github.com/Hannah-Sten/TeXiFy-IDEA/issues/909">#909</a>, <a href="https://github.com/Hannah-Sten/TeXiFy-IDEA/issues/948">#948</a>, <a href="https://github.com/Hannah-Sten/TeXiFy-IDEA/issues/963">#963</a>, <a href="https://github.com/Hannah-Sten/TeXiFy-IDEA/issues/1055">#1055</a>)</li>
        </ul>
        <br>
        <p>
            Thanks to <a href="https://github.com/pschuprikov">@pschuprikov</a>, <a href="https://github.com/Qwlouse">@Qwlouse</a>, <a href="https://github.com/ice1000">@ice1000</a> and <a href="https://github.com/Stainzl">@Stainzl</a> for contributing to this release.
        </p>
        <br>
        <p>
            The full list of releases is available on the <a href="https://github.com/Hannah-Sten/TeXiFy-IDEA/releases">GitHub releases page</a>.
        </p>
    ]]></change-notes>

    <!-- Custom actions -->
    <actions>
        <!-- New LaTeX file -->
        <action id="texify.NewFile" class="nl.hannahsten.texifyidea.action.NewLatexFileAction">
            <add-to-group group-id="NewGroup" anchor="after" relative-to-action="NewFile" />
        </action>

        <!-- LaTeX Edit commands -->
        <group id="texify.LatexMenuEdit" text="_LaTeX" description="Latex edit actions" popup="true"
               class="nl.hannahsten.texifyidea.action.group.LatexEditMenuGroup">
            <add-to-group group-id="EditSmartGroup" anchor="first"/>

            <!-- Table Creation Wizard-->
            <action class="nl.hannahsten.texifyidea.action.tablewizard.LatexTableWizardAction" id="texify.TableCreationWizzard" text="_Table Creation Wizard"
                    description="Shows popup to create and insert a table."/>

            <!-- Toggle Star -->
            <action class="nl.hannahsten.texifyidea.action.LatexToggleStarAction" id="texify.ToggleStar" text="Toggle _Star"
                    description="Adds/removes a star from a LaTeX command.">
                <keyboard-shortcut first-keystroke="alt shift 8" keymap="$default" />
            </action>
        </group>

        <!-- LaTeX Analyze commands -->
        <group id="texify.LatexMenuAnalyze" text="_LaTeX" description="Latex analysis actions" popup="true"
               class="nl.hannahsten.texifyidea.action.group.LatexAnalyzeMenuGroup">
            <!-- Do not add it to the group here, because that will be handled in AnalyzeMenuRegistration. -->
            <!--<add-to-group group-id="AnalyzeMenu" anchor="last"/>-->

            <action class="nl.hannahsten.texifyidea.action.analysis.WordCountAction" id="texify.analysis.WordCount"
                    text="_Word Count" description="Estimate the word count of the currently active .tex file and inclusions.">
                <keyboard-shortcut first-keystroke="control alt W" keymap="$default" />
            </action>
        </group>

        <!-- LaTeX Tools commands -->
        <group id="texify.LatexMenuTools" text="_LaTeX" description="Latex tools" popup="true"
               class="nl.hannahsten.texifyidea.action.group.LatexToolsMenuGroup">
            <add-to-group group-id="ToolsMenu" anchor="last"/>

            <!-- Clear files -->
            <action class="nl.hannahsten.texifyidea.action.ClearAuxFiles" id="texify.ClearAuxFiles" text="Clear Auxiliary Files">
            </action>
            <action class="nl.hannahsten.texifyidea.action.ClearGeneratedFiles" id="texify.ClearGeneratedFiles" text="Clear Auxiliary and Generated Files">
            </action>

            <separator/>
            <!-- Show equation preview -->
            <action class="nl.hannahsten.texifyidea.action.preview.ShowEquationPreview" id="texify.ShowEquationPreview" text="Preview _Equation">
                <keyboard-shortcut keymap="$default" first-keystroke="shift ctrl X"/>
            </action>

            <!-- Show tikz preview -->
            <action class="nl.hannahsten.texifyidea.action.preview.ShowTikzPreview" id="texify.ShowTikzPreview" text="Preview _Tikz Picture">
                <keyboard-shortcut keymap="$default" first-keystroke="shift ctrl Y"/>
            </action>

        </group>

        <!-- Insert: Sectioning -->
        <group id="texify.LatexMenu.Insert.Sectioning" class="nl.hannahsten.texifyidea.action.group.InsertSectioningActionGroup" text="_Sectioning" description="Insert sectioning." popup="true">
            <add-to-group group-id="texify.LatexMenuEdit" anchor="first"/>

            <action class="nl.hannahsten.texifyidea.action.insert.InsertPartAction" id="texify.insert.sectioning.Part"
                    text="_Part" description="Insert the part command." />
            <action class="nl.hannahsten.texifyidea.action.insert.InsertChapterAction" id="texify.insert.sectioning.Chapter"
                    text="_Chapter" description="Insert the chapter command." />
            <action class="nl.hannahsten.texifyidea.action.insert.InsertSectionAction" id="texify.insert.sectioning.Section"
                    text="_Section" description="Insert the section command." />
            <action class="nl.hannahsten.texifyidea.action.insert.InsertSubSectionAction" id="texify.insert.sectioning.Subsection"
                    text="S_ubsection" description="Insert the subsection command." />
            <action class="nl.hannahsten.texifyidea.action.insert.InsertSubSubSectionAction" id="texify.insert.sectioning.Subsubsection"
                    text="Su_bsubsection" description="Insert the subsubsection command." />
            <action class="nl.hannahsten.texifyidea.action.insert.InsertParagraphAction" id="texify.insert.sectioning.Paragraph"
                    text="_Paragraph" description="Insert the paragraph command." />
            <action class="nl.hannahsten.texifyidea.action.insert.InsertSubParagraphAction" id="texify.insert.sectioning.Subparagraph"
                    text="Subp_aragraph" description="Insert the subparagraph command." />
        </group>

        <!-- Insert: Font Style -->
        <group id="texify.LatexMenu.Insert.FontStyle" class="nl.hannahsten.texifyidea.action.group.InsertFontStyleActionGroup" text="_Font Style" description="Insert font style commands." popup="true">
            <add-to-group group-id="texify.LatexMenuEdit" anchor="after" relative-to-action="texify.LatexMenu.Insert.Sectioning" />

            <action class="nl.hannahsten.texifyidea.action.insert.InsertBoldfaceAction" id="texify.insert.fontstyle.BoldFace"
                    text="_Bold" description="Insert the command to make text appear bold.">
                <keyboard-shortcut first-keystroke="control alt shift B" keymap="$default" />
            </action>

            <action class="nl.hannahsten.texifyidea.action.insert.InsertItalicsAction" id="texify.insert.fontstyle.Italics"
                    text="_Italics" description="Insert the command to make text appear in italics.">
                <keyboard-shortcut first-keystroke="control alt shift I" keymap="$default" />
            </action>

            <action class="nl.hannahsten.texifyidea.action.insert.InsertUnderlineAction" id="texify.insert.fontstyle.Underline"
                    text="_Underline" description="Insert the command to underline text.">
                <keyboard-shortcut first-keystroke="control alt shift U" keymap="$default" />
            </action>

            <action class="nl.hannahsten.texifyidea.action.insert.InsertOverlineAction" id="texify.insert.fontstyle.Overline"
                    text="_Overline" description="Insert the command to overline text.">
                <keyboard-shortcut first-keystroke="control alt shift O" keymap="$default" />
            </action>

            <action class="nl.hannahsten.texifyidea.action.insert.InsertSmallCapsAction" id="texify.insert.fontstyle.SmallCaps"
                    text="Small _Capitals" description="Insert the command to underline text.">
                <keyboard-shortcut first-keystroke="control alt shift C" keymap="$default" />
            </action>

            <action class="nl.hannahsten.texifyidea.action.insert.InsertTypewriterAction" id="texify.insert.fontstyle.Typewriter"
                    text="_Typewriter (Monospace)" description="Insert the command to make text monospace.">
                <keyboard-shortcut first-keystroke="control alt shift T" keymap="$default" />
            </action>

            <action class="nl.hannahsten.texifyidea.action.insert.InsertStrikethroughAction" id="texify.insert.fontstyle.Strikethrough"
                    text="_Strikethrough (Ulem Package)" description="Insert the command to strikethrough text (inclusion of ulem package required).">
                <keyboard-shortcut first-keystroke="control alt shift S" keymap="$default" />
            </action>

            <action class="nl.hannahsten.texifyidea.action.insert.InsertSlantedAction" id="texify.insert.fontstyle.Slanted"
                    text="S_lanted" description="Insert the command to make text appear slanted.">
                <keyboard-shortcut first-keystroke="control alt shift L" keymap="$default" />
            </action>

            <action class="nl.hannahsten.texifyidea.action.insert.InsertEmphasisAction" id="texify.insert.fontstyle.Emphasis"
                    text="_Emphasis" description="Insert the command to emphasise text.">
            </action>
        </group>

        <!-- SumatraPDF -->
        <group id="texify.LatexMenu.Sumatra" class="nl.hannahsten.texifyidea.action.group.SumatraActionGroup" text="Sumatra_PDF"
               description="Interact with SumatraPDF." popup="true" icon="/nl/hannahsten/texifyidea/icons/sumatra.svg">
            <add-to-group group-id="texify.LatexMenuTools" anchor="first"/>

            <action class="nl.hannahsten.texifyidea.action.sumatra.ForwardSearchAction" id="texify.sumatra.ForwardSearch"
                    text="Go to _Line in PDF" description="Find the content on cursor in the PDF.">
                <keyboard-shortcut first-keystroke="control alt shift PERIOD" keymap="$default" />
            </action>
            <action class="nl.hannahsten.texifyidea.action.sumatra.ConfigureInverseSearchAction" id="texify.sumatra.ConfigureInverseSearch"
                    text="_Configure Inverse Search" description="Setup inverse search integration with SumatraPDF and TeXiFy IDEA."/>
        </group>

        <!-- Evince -->
        <group id="texify.LatexMenu.Evince" class="nl.hannahsten.texifyidea.action.group.EvinceActionGroup" text="Evince"
               description="Interact with Evince." popup="true">
            <add-to-group group-id="texify.LatexMenuTools" anchor="first"/>

            <action class="nl.hannahsten.texifyidea.action.evince.ForwardSearchAction" id="texify.evince.ForwardSearch"
                    text="Go to _Line in PDF" description="Find the content on cursor in the PDF.">
                <keyboard-shortcut first-keystroke="control alt shift PERIOD" keymap="$default" />
            </action>
        </group>

        <!-- Okular -->
        <group id="texify.LatexMenu.Okular" class="nl.hannahsten.texifyidea.action.group.OkularActionGroup" text="Okular"
               description="Interact with Okular." popup="true">
            <add-to-group group-id="texify.LatexMenuTools" anchor="first"/>

            <action class="nl.hannahsten.texifyidea.action.okular.ForwardSearchAction" id="texify.okular.ForwardSearch"
                    text="Go to _Line in PDF" description="Find the content on cursor in the PDF.">
                <keyboard-shortcut first-keystroke="control alt shift PERIOD" keymap="$default"/>
            </action>

            <action class="nl.hannahsten.texifyidea.action.okular.ConfigureInverseSearchAction" id="texify.okular.ConfigureInverseSearch"
                    text="Configure Inverse Search" description="Instructions for configuring inverse search."/>
        </group>
    </actions>

    <!-- Hooks for plugin functionality -->
    <extensions defaultExtensionNs="com.intellij">
        <!-- Startup -->
        <postStartupActivity implementation="nl.hannahsten.texifyidea.startup.StartEvinceInverseSearchListener"/>
        <postStartupActivity implementation="nl.hannahsten.texifyidea.startup.AnalyzeMenuRegistration" />

        <!-- Files and project -->
        <moduleType id="LATEX_MODULE_TYPE" implementationClass="nl.hannahsten.texifyidea.modules.LatexModuleType"/>
        <fileTypeFactory implementation="nl.hannahsten.texifyidea.file.TexifyFileTypeFactory"/>

        <!-- Register module type for new project creation in non-IntelliJ IDEs -->
        <directoryProjectGenerator implementation="nl.hannahsten.texifyidea.modules.LatexProjectGenerator"/>

        <!-- Templates -->
        <internalFileTemplate name="LaTeX Source"/>
        <internalFileTemplate name="LaTeX Package"/>
        <internalFileTemplate name="LaTeX Document class"/>
        <internalFileTemplate name="BibTeX Bibliography"/>
        <internalFileTemplate name="TikZ Picture"/>

        <fileTemplateGroup implementation="nl.hannahsten.texifyidea.templates.LatexTemplatesFactory"/>

        <!-- Live templates -->
        <defaultLiveTemplatesProvider implementation="nl.hannahsten.texifyidea.templates.LatexLiveTemplateProvider"/>
        <defaultLiveTemplatesProvider implementation="nl.hannahsten.texifyidea.templates.BibtexLiveTemplateProvider"/>
        <liveTemplateContext implementation="nl.hannahsten.texifyidea.templates.LatexContext"/>
        <liveTemplateContext implementation="nl.hannahsten.texifyidea.templates.BibtexContext"/>

        <!-- Application settings -->
        <applicationService serviceImplementation="nl.hannahsten.texifyidea.settings.TexifySettings"/>
        <applicationConfigurable instance="nl.hannahsten.texifyidea.settings.TexifyConfigurable" groupId="language" id="TexifyConfigurable"/>
        <colorSettingsPage implementation="nl.hannahsten.texifyidea.highlighting.LatexColorSettingsPage"/>
        <colorSettingsPage implementation="nl.hannahsten.texifyidea.highlighting.BibtexColorSettingsPage"/>
        <!-- Project settings -->
        <projectService serviceImplementation="nl.hannahsten.texifyidea.settings.TexifyProjectSettings"/>
        <projectConfigurable instance="nl.hannahsten.texifyidea.settings.TexifyProjectConfigurable" groupId="TexifyConfigurable" id="TexifyProjectConfigurable" />

        <!-- Languages -->
        <lang.parserDefinition language="Latex" implementationClass="nl.hannahsten.texifyidea.LatexParserDefinition"/>
        <lang.parserDefinition language="Bibtex" implementationClass="nl.hannahsten.texifyidea.BibtexParserDefinition"/>
        <lang.syntaxHighlighterFactory language="Latex" implementationClass="nl.hannahsten.texifyidea.highlighting.LatexSyntaxHighlighterFactory"/>
        <lang.syntaxHighlighterFactory language="Bibtex" implementationClass="nl.hannahsten.texifyidea.highlighting.BibtexSyntaxHighlighterFactory"/>
        <lang.commenter language="Latex" implementationClass="nl.hannahsten.texifyidea.editor.LatexCommenter"/>
        <lang.commenter language="Bibtex" implementationClass="nl.hannahsten.texifyidea.editor.LatexCommenter"/>
        <lang.braceMatcher language="Latex" implementationClass="nl.hannahsten.texifyidea.highlighting.LatexPairedBraceMatcher"/>
        <lang.braceMatcher language="Bibtex" implementationClass="nl.hannahsten.texifyidea.highlighting.BibtexPairedBraceMatcher"/>

        <!-- Structure view -->
        <lang.psiStructureViewFactory language="Latex" implementationClass="nl.hannahsten.texifyidea.structure.latex.LatexStructureViewFactory"/>
        <lang.psiStructureViewFactory language="Bibtex" implementationClass="nl.hannahsten.texifyidea.structure.bibtex.BibtexStructureViewFactory"/>

        <!-- Breadcrumbs -->
        <breadcrumbsInfoProvider implementation="nl.hannahsten.texifyidea.structure.latex.LatexBreadcrumbsInfo"/>
        <breadcrumbsInfoProvider implementation="nl.hannahsten.texifyidea.structure.bibtex.BibtexBreadcrumbsInfo"/>

        <!-- Project view -->
        <projectViewNodeDecorator implementation="nl.hannahsten.texifyidea.project.TeXiFyProjectViewNodeDecorator"/>

        <!-- Editor -->
        <lang.foldingBuilder language="Latex" implementationClass="nl.hannahsten.texifyidea.folding.LatexMathSymbolFoldingBuilder"/>
        <lang.foldingBuilder language="Latex" implementationClass="nl.hannahsten.texifyidea.folding.LatexEnvironmentFoldingBuilder"/>
        <lang.foldingBuilder language="Latex" implementationClass="nl.hannahsten.texifyidea.folding.LatexImportFoldingBuilder"/>
        <lang.foldingBuilder language="Latex" implementationClass="nl.hannahsten.texifyidea.folding.LatexSectionFoldingBuilder"/>
        <lang.formatter language="Latex" implementationClass="nl.hannahsten.texifyidea.formatting.LatexFormattingModelBuilder"/>
        <lang.formatter language="Bibtex" implementationClass="nl.hannahsten.texifyidea.formatting.BibtexFormattingModelBuilder"/>
        <completion.contributor language="Latex" implementationClass="nl.hannahsten.texifyidea.completion.TexifyCompletionContributor"/>
        <completion.contributor language="Bibtex" implementationClass="nl.hannahsten.texifyidea.completion.TexifyCompletionContributor"/>
        <enterHandlerDelegate implementation="nl.hannahsten.texifyidea.insight.LatexEnterBetweenBracesHandler"/>
        <enterHandlerDelegate implementation="nl.hannahsten.texifyidea.completion.InsertBibtexTag"/>
        <codeInsight.parameterInfo language="Latex" implementationClass="nl.hannahsten.texifyidea.insight.LatexParameterInfoHandler"/>
        <typedHandler implementation="nl.hannahsten.texifyidea.highlighting.LatexTypedHandler"/>
        <lookup.charFilter implementation="nl.hannahsten.texifyidea.completion.LatexCharFilter" id="latex"/>
        <enterHandlerDelegate implementation="nl.hannahsten.texifyidea.editor.InsertEnumerationItem"/>
        <typedHandler implementation="nl.hannahsten.texifyidea.editor.ShiftTracker"/>
        <typedHandler implementation="nl.hannahsten.texifyidea.editor.UpDownAutoBracket"/>
        <typedHandler implementation="nl.hannahsten.texifyidea.editor.BibtexQuoteInsertHandler"/>
        <typedHandler implementation="nl.hannahsten.texifyidea.editor.LatexQuoteInsertHandler"/>
        <typedHandler implementation="nl.hannahsten.texifyidea.editor.autocompile.ContinuousPreviewHandler"/>
        <backspaceHandlerDelegate implementation="nl.hannahsten.texifyidea.editor.autocompile.ContinuousPreviewBackspacehandler" />
        <typedHandler implementation="nl.hannahsten.texifyidea.editor.autocompile.AutocompileHandler"/>
        <backspaceHandlerDelegate implementation="nl.hannahsten.texifyidea.editor.autocompile.AutoCompileBackspacehandler" />

        <!-- Navigation -->
        <gotoSymbolContributor implementation="nl.hannahsten.texifyidea.navigation.GotoLabelSymbolContributor"/>
        <gotoSymbolContributor implementation="nl.hannahsten.texifyidea.navigation.GotoCommandDefinitionSymbolContributor"/>
        <gotoSymbolContributor implementation="nl.hannahsten.texifyidea.navigation.GotoEnvironmentDefinitionSymbolContributor"/>
        <gotoSymbolContributor implementation="nl.hannahsten.texifyidea.navigation.GotoSectionDefinitionSymbolContributor"/>

        <!-- Line markers -->
        <codeInsight.lineMarkerProvider language="Latex" implementationClass="nl.hannahsten.texifyidea.insight.LatexLineMarkerProvider"/>
        <codeInsight.lineMarkerProvider language="Latex" implementationClass="nl.hannahsten.texifyidea.gutter.LatexNavigationGutter"/>
        <runLineMarkerContributor language="Latex" implementationClass="nl.hannahsten.texifyidea.gutter.LatexCompileGutter"/>

        <!-- Run configurations -->
        <configurationType implementation="nl.hannahsten.texifyidea.run.latex.LatexRunConfigurationType"/>
        <configurationType implementation="nl.hannahsten.texifyidea.run.bibtex.BibtexRunConfigurationType"/>
        <configurationType implementation="nl.hannahsten.texifyidea.run.makeindex.MakeindexRunConfigurationType"/>
        <runConfigurationProducer implementation="nl.hannahsten.texifyidea.run.latex.LatexRunConfigurationProducer"/>

        <!-- Annotators -->
        <annotator language="Latex" implementationClass="nl.hannahsten.texifyidea.highlighting.LatexAnnotator"/>
        <annotator language="Bibtex" implementationClass="nl.hannahsten.texifyidea.highlighting.BibtexAnnotator"/>

        <!-- Blame -->
        <errorHandler implementation="nl.hannahsten.texifyidea.blame.LatexErrorReportSubmitter"/>

        <!-- Index -->
        <stubElementTypeHolder class="nl.hannahsten.texifyidea.psi.LatexTypes"/>
        <stubElementTypeHolder class="nl.hannahsten.texifyidea.psi.BibtexTypes"/>

        <stubIndex implementation="nl.hannahsten.texifyidea.index.LatexCommandsIndex"/>
        <stubIndex implementation="nl.hannahsten.texifyidea.index.BibtexEntryIndex"/>
        <stubIndex implementation="nl.hannahsten.texifyidea.index.LatexIncludesIndex"/>
        <stubIndex implementation="nl.hannahsten.texifyidea.index.LatexDefinitionIndex"/>

        <!-- Documentation -->
        <lang.documentationProvider language="Latex" implementationClass="nl.hannahsten.texifyidea.documentation.LatexDocumentationProvider"/>
        <lang.documentationProvider language="Bibtex" implementationClass="nl.hannahsten.texifyidea.documentation.BibtexDocumentationProvider"/>

        <!-- Other Services -->
        <projectService serviceInterface="nl.hannahsten.texifyidea.util.files.ReferencedFileSetService"
                        serviceImplementation="nl.hannahsten.texifyidea.util.files.impl.ReferencedFileSetServiceImpl"/>

        <!-- Inspections -->
        <spellchecker.support language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.LatexSpellcheckingStrategy"/>

        <!-- Latex inspections -->
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexMathOperatorEscapeInspection"
                         groupName="LaTeX" displayName="Non-escaped common math operators"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexCommandAlreadyDefinedInspection"
                         groupName="LaTeX" displayName="Command is already defined"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexMightBreakTexifyInspection"
                         groupName="LaTeX" displayName="Might break TeXiFy functionality"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexUnicodeInspection"
                         groupName="LaTeX" displayName="Unsupported Unicode character"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexOverInsteadOfFracInspection"
                         groupName="LaTeX" displayName="Use of \over discouraged"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexRedundantEscapeInspection"
                         groupName="LaTeX" displayName="Redundant escape when Unicode is enabled"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexMissingDocumentclassInspection"
                         groupName="LaTeX" displayName="Missing documentclass"
                         enabledByDefault="false"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexMissingDocumentEnvironmentInspection"
                         groupName="LaTeX" displayName="Missing document environment"
                         enabledByDefault="false"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexTooLargeSectionInspection"
                         groupName="LaTeX" displayName="Too large sections"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexPrimitiveStyleInspection"
                         groupName="LaTeX" displayName="TeX styling primitives usage is discouraged"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexLineBreakInspection"
                         groupName="LaTeX" displayName="Start sentences on a new line"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexNonBreakingSpaceInspection"
                         groupName="LaTeX" displayName="Non-breaking spaces before references"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexDiscouragedUseOfDefInspection"
                         groupName="LaTeX" displayName="Discouraged use of \def and \let"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexMissingLabelInspection"
                         groupName="LaTeX" displayName="Missing labels"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexDuplicateLabelInspection"
                         groupName="LaTeX" displayName="Duplicate labels"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexLabelConventionInspection"
                         groupName="LaTeX" displayName="Label conventions"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexMissingImportInspection"
                         groupName="LaTeX" displayName="Missing imports"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexUnresolvedReferenceInspection"
                         groupName="LaTeX" displayName="Unresolved references"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexEquationReferenceInspection"
                         groupName="LaTeX" displayName="Use \eqref{...} instead of (\ref{...})"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexNonMatchingEnvironmentInspection"
                         groupName="LaTeX" displayName="Non matching environment commands"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexEllipsisInspection"
                         groupName="LaTeX" displayName="Ellipsis with ... instead of \ldots or \dots"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexAvoidEqnarrayInspection"
                         groupName="LaTeX" displayName="Avoid eqnarray"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexSpaceAfterAbbreviationInspection"
                         groupName="LaTeX" displayName="Normal space after abbreviation"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexEnDashInspection"
                         groupName="LaTeX" displayName="En dash in number ranges"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexSentenceEndWithCapitalInspection"
                         groupName="LaTeX" displayName="End-of-sentence space after sentences ending with capitals"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexCdotInspection"
                         groupName="LaTeX" displayName="Use of . instead of \cdot"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexXInsteadOfTimesInspection"
                         groupName="LaTeX" displayName="Use of x instead of \times"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexGroupedSubSupScriptInspection"
                         groupName="LaTeX" displayName="Grouped superscript and subscript"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexRedundantParInspection"
                         groupName="LaTeX" displayName="Redundant use of \par"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexNonMatchingIfInspection"
                         groupName="LaTeX" displayName="Open if-then-else control sequence"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexQedHereInspection"
                         groupName="LaTeX" displayName="Insert \qedhere in trailing displaymath environment"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexExtremeInequalityInspection"
                         groupName="LaTeX" displayName="Use the matching amssymb symbol for extreme inequalities"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexFileNotFoundInspection"
                         groupName="LaTeX" displayName="File not found"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexInclusionLoopInspection"
                         groupName="LaTeX" displayName="Inclusion loops"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexPrimitiveEquationInspection"
                         groupName="LaTeX" displayName="Discouraged use of primitive TeX display math"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexCollapseCiteInspection"
                         groupName="LaTeX" displayName="Collapse cite commands"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexDiacriticIJInspection"
                         groupName="LaTeX" displayName="Dotless versions of i and j must be used with diacritics"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexMultipleIncludesInspection"
                         groupName="LaTeX" displayName="Package has been imported multiple times"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexTrimWhitespaceInspection"
                         groupName="LaTeX" displayName="Unnecessary whitespace in section commands"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexEncloseWithLeftRightInspection"
                         groupName="LaTeX" displayName="Enclose high commands with \leftX..\rightX"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexCiteBeforePeriodInspection"
                         groupName="LaTeX" displayName="Citations must be placed before interpunction"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexDuplicateDefinitionInspection"
                         groupName="LaTeX" displayName="Duplicate command definitions"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexGatherEquationsInspection"
                         groupName="LaTeX" displayName="Gather equations"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexMakeatletterInspection"
                         groupName="LaTeX" displayName="Discouraged use of \makeatletter in tex sources"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexNoExtensionInspection"
                         groupName="LaTeX" displayName="File argument should not include the extension"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexRequiredExtensionInspection"
                         groupName="LaTeX" displayName="File argument should include the extension"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexNestedIncludesInspection"
                         groupName="LaTeX" displayName="Nested includes"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.latex.LatexFigureNotReferencedInspection"
                         groupName="LaTeX" displayName="Figure not referenced"
                         enabledByDefault="true"/>

        <!-- Bibtex inspections -->
        <localInspection language="Bibtex" implementationClass="nl.hannahsten.texifyidea.inspections.bibtex.BibtexDuplicateIdInspection"
                         groupName="BibTeX" displayName="Duplicate ID"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.bibtex.BibtexMissingBibliographystyleInspection"
                         groupName="BibTeX" displayName="Missing bibliography style"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.bibtex.BibtexDuplicateBibliographystyleInspection"
                         groupName="BibTeX" displayName="Duplicate bibliography style commands"
                         enabledByDefault="true"/>
        <localInspection language="Latex" implementationClass="nl.hannahsten.texifyidea.inspections.bibtex.BibtexDuplicateBibliographyInspection"
                         groupName="BibTeX" displayName="Same bibliography is included multiple times"
                         enabledByDefault="true"/>

        <!-- Intentions -->
        <intentionAction>
            <className>nl.hannahsten.texifyidea.intentions.LatexDisplayMathIntention</className>
            <category>LaTeX</category>
            <descriptionDirectoryName>LatexDisplayMath</descriptionDirectoryName>
        </intentionAction>

        <intentionAction>
            <className>nl.hannahsten.texifyidea.intentions.LatexMoveSectionToFileIntention</className>
            <category>LaTeX</category>
            <descriptionDirectoryName>LatexMoveSectionToFile</descriptionDirectoryName>
        </intentionAction>

        <intentionAction>
            <className>nl.hannahsten.texifyidea.intentions.LatexMoveSelectionToFileIntention</className>
            <category>LaTeX</category>
            <descriptionDirectoryName>LatexMoveSelectionToFile</descriptionDirectoryName>
        </intentionAction>

        <intentionAction>
            <className>nl.hannahsten.texifyidea.intentions.LatexUnpackUsepackageIntention</className>
            <category>LaTeX</category>
            <descriptionDirectoryName>LatexUnpackUsepackage</descriptionDirectoryName>
        </intentionAction>

        <intentionAction>
            <className>nl.hannahsten.texifyidea.intentions.LatexLeftRightParenthesesIntention</className>
            <category>LaTeX</category>
            <descriptionDirectoryName>LatexLeftRightParentheses</descriptionDirectoryName>
        </intentionAction>

        <intentionAction>
            <className>nl.hannahsten.texifyidea.intentions.LatexInlineDisplayToggle</className>
            <category>LaTeX</category>
            <descriptionDirectoryName>LatexInlineDisplayToggle</descriptionDirectoryName>
        </intentionAction>

        <intentionAction>
            <className>nl.hannahsten.texifyidea.intentions.LatexMathToggle</className>
            <category>LaTeX</category>
            <descriptionDirectoryName>LatexMathToggle</descriptionDirectoryName>
        </intentionAction>

        <intentionAction>
            <className>nl.hannahsten.texifyidea.intentions.LatexToggleSmartQuotesIntention</className>
            <category>LaTeX</category>
            <descriptionDirectoryName>LatexToggleSmartQuotes</descriptionDirectoryName>
        </intentionAction>

        <intentionAction>
            <className>nl.hannahsten.texifyidea.intentions.LatexLabelDefiningNewCommand</className>
            <category>LaTeX</category>
            <descriptionDirectoryName>LatexLabelDefiningNewCommand</descriptionDirectoryName>
        </intentionAction>
    </extensions>
</idea-plugin>
